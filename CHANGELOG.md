# Changelog

All notable changes to this project will be documented in this file.

## [v1.0.0] - 2025-12-23 - Initial Release

### Added
- **Core Framework**: Initial multi-database proxy gateway implementation
- **Basic Database Support**: MySQL, MariaDB, PostgreSQL, Oracle support
- **Query Routing**: UUID-based data source identification and routing
- **Security Features**: SQL injection prevention, JWT authentication, rate limiting
- **API Endpoints**: Basic query and data source management APIs
- **Documentation**: Initial README and project structure

## [v1.1.0] - 2025-12-24 - Phase 1: Enhanced Single-Source Capabilities

### Added
- **Data Lake & Warehouse Support**: Added Apache Iceberg, Delta Lake, Apache Hudi table formats
- **Cloud Data Warehouses**: Added Snowflake, Databricks, Redshift, BigQuery connectors
- **OLAP Engines**: Added ClickHouse, Doris, StarRocks, Druid drivers
- **Object Storage Integration**: Added S3, MinIO, OSS, COS, Azure Blob clients
- **Distributed Storage**: Added HDFS, Apache Ozone support
- **File Formats**: Added Parquet, ORC, Avro, CSV, JSON file readers
- **Domestic Database Support**: Added OceanBase, TiDB, TDSQL, GaussDB drivers
- **Chinese Databases**: Added DaMeng, KingbaseES, GBase, Oscar, OpenGauss support
- **Streaming Query Capability**: Added streaming query functionality with configurable fallback

## [2026-01-05 to 2026-01-12] - Core Framework Enhancements

### Added
- **Additional Data Sources**: Added support for Hive, SQL Server, Hologres, MongoDB, MaxCompute
- **OLAP Framework Support**: Enhanced OLAP engine integration
- **Query Strategies**: Implemented streaming query and pagination query strategies with configuration options

### Fixed
- **Code Framework**: Resolved multiple framework issues and compilation failures
- **Oracle Pagination**: Adjusted Oracle pagination SQL
- **URL Handling**: Improved connectUrl acquisition and connection string handling
- **Streaming Query**: Fixed streaming query exceptions and token refresh issues

## [2026-01-16] - Documentation Structure Optimization

### Changed
- Updated license information in README to reflect actual Apache 2.0 license instead of incorrect MIT license
- Modified license badge in README to show correct Apache 2.0 license

### Added
- Created comprehensive documentation structure with dedicated files:
  - `docs/api_usage.md` - API usage examples and guidelines
  - `docs/architecture.md` - System architecture overview
  - `docs/configuration.md` - Configuration options and parameters
  - `docs/contributing.md` - Contribution guidelines
  - `docs/development.md` - Development practices and driver framework details
  - `docs/roadmap.md` - Project roadmap and phase information
  - `docs/refactoring_guide.md` - Refactoring recommendations and implementation steps

### Removed
- Deleted redundant documentation files:
  - `CLAUDE.md` - Autogenerated template with no substantial content
  - `DRIVER_FRAMEWORK.md` - Content migrated to `docs/development.md`
  - `FETCH_API_USAGE.md` - Content migrated to `docs/api_usage.md`
  - `PROJECT_STRUCTURE_ANALYSIS.md` - Content migrated to `docs/refactoring_guide.md`

## [Unreleased] - Streaming Query Updates

### Changed
- `ExecuteQuery` now prefers establishing a backend streaming cursor when supported. Returns the first batch of rows and a `nextUri` to continue the stream.
- Added `/fetch` POST and `/fetch/{query_id}/{slug}/{token}` GET endpoints for explicit batch/streaming retrieval.
- `QueryResponse` and `FetchQueryResponse` now include `nextUri` to indicate continuation URIs for streaming sessions.
- Added server-side `QuerySession` management to hold streaming cursors (`Rows`) and cancellation handles.
- OpenAPI spec updated: `specs/001-phase1-enhanced-single-source/contracts/openapi.yaml` now documents `/fetch` endpoints and `FetchQueryRequest`/`FetchQueryResponse` schemas.
- README updated with streaming usage examples and new `query.prefer_streaming` configuration documentation.
- `FETCH_API_USAGE.md` updated: example requests now use `batch_size` (snake_case) to match API model.
- `test_fetch_api.sh` updated to use `batch_size` in JSON payloads.

### Added
- `CHANGELOG.md` (this file).

### Notes
- The streaming behavior is configurable via `query.prefer_streaming` (default `true`). When `prefer_streaming` is `true` and the backend does not support streaming, queries will fail; set it to `false` to allow automatic fallback to LIMIT/OFFSET continuation.
- Sessions have a default TTL and are subject to server-side cleanup; clients should exhaust or explicitly complete streams when possible.